---
- name: Build containers
  ansible.builtin.shell: |
    docker compose --project-directory "{{ docker_apps_project }}" build
  listen:
    - "Rebuild containers"

- name: Stop and remove containers
  ansible.builtin.shell: |
    docker compose --project-directory "{{ docker_apps_project }}" down
  listen:
    - "Stop containers"
    - "Restart containers"

- name: Create and start containers
  ansible.builtin.shell: |
    docker compose --project-directory "{{ docker_apps_project }}" up -d
  listen:
    - "Start containers"
    - "Restart containers"
    - "Rebuild containers"
